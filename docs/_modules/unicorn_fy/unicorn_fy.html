<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>unicorn_fy.unicorn_fy &#8212; unicorn-fy 0.13.1 documentation</title><meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=92fd9be5" />
    <link rel="stylesheet" type="text/css" href="../../_static/pydoctheme.css?v=fdf8e9ae" />
    
    <script src="../../_static/documentation_options.js?v=6efca38a"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /><link rel="shortcut icon" type="image/png" href="../../_static/lucit.png" />
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    
    <script
        src='//eu.fw-cdn.com/10659511/361973.js'
        chat='true'>
    </script>
    
            <script type="text/javascript" src="../../_static/copybutton.js"></script>
            <script type="text/javascript" src="../../_static/menu.js"></script> 
  </head>
<body>
<div class="mobile-nav">
    <input type="checkbox" id="menuToggler" class="toggler__input" aria-controls="navigation"
           aria-pressed="false" aria-expanded="false" role="button" aria-label="Menu" />
    <label for="menuToggler" class="toggler__label">
        <span></span>
    </label>
    <nav class="nav-content" role="navigation">
        <form role="search" class="search" action="../../search.html" method="get">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" class="search-icon">
                <path fill-rule="nonzero"
                        d="M15.5 14h-.79l-.28-.27a6.5 6.5 0 001.48-5.34c-.47-2.78-2.79-5-5.59-5.34a6.505 6.505 0 00-7.27 7.27c.34 2.8 2.56 5.12 5.34 5.59a6.5 6.5 0 005.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" fill="#444"></path>
            </svg>
            <input type="text" name="q" aria-label="Quick search"/>
            <input type="submit" value="Go"/>
        </form>
    </nav>
    <div class="menu-wrapper">
        <nav class="menu" role="navigation" aria-label="main navigation">
            <p class="logo">
                <div style="text-align: center;">
                    <a href="https://www.lucit.tech"><img src="https://www.lucit.tech/files/images/logos/LUCIT-LOGO.png"></a><br>
                    <a href="https://shop.lucit.services/software/unicorn-binance-suite" style="font-size: 0.85em;font-weight: 900">Get a UNICORN Binance Suite License!</a><br>
                    <br>
                    <a href="https://github.com/LUCIT-Systems-and-Development" target="_blank" style="text-decoration:none;"><img src="../../_static/icons8-github-20.png"></a>
                    <a href="https://fb.me/lucit.systems.and.development" target="_blank" style="text-decoration:none;"><img src="../../_static/icons8-facebook-20.png"></a>
                    <a href="https://twitter.com/LUCIT_SysDev" target="_blank" style="text-decoration:none;"><img src="../../_static/icons8-twitter-20.png"></a>
                    <a href="https://www.linkedin.com/company/lucit-systems-and-development" target="_blank" style="text-decoration:none;"><img src="../../_static/icons8-linkedin-20.png"></a>
                    <a href="https://www.xing.com/pages/lucit-systems-and-development" target="_blank" style="text-decoration:none;"><img src="../../_static/icons8-xing-20.png"></a>
                    <a href="https://medium.lucit.tech" target="_blank" style="text-decoration:none;"><img src="../../_static/icons8-medium-monogram-20.png"></a>
                    <a href="https://www.youtube.com/channel/UCp57u8vaPqEWQTlfpYn-KnQ" target="_blank" style="text-decoration:none;"><img src="../../_static/icons8-youtube-20.png"></a>
                </div>
            </p>
<div id="searchbox" style="display: block" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
<div role="note" aria-label="source code">
    <h3>GitHub</h3>
    <ul class="this-page-menu">
      <li><a href="https://github.com/LUCIT-Systems-and-Development/unicorn-fy">Show Source</a></li>
      
<li>
<a class="github-button" href="https://github.com/LUCIT-Systems-and-Development/unicorn-fy"
   data-icon="octicon-star" data-show-count="true"
   aria-label="Star LUCIT-Systems-and-Development/unicorn-fy on GitHub">Star</a>
<br />
<a class="github-button" href="https://github.com/LUCIT-Systems-and-Development/unicorn-fy/subscription"
   data-icon="octicon-eye" data-show-count="true"
   aria-label="Watch LUCIT-Systems-and-Development/unicorn-fy on GitHub">Watch</a>
<br />
<a class="github-button" href="https://github.com/LUCIT-Systems-and-Development/unicorn-fy/fork"
   data-icon="octicon-repo-forked" data-show-count="true"
   aria-label="Fork LUCIT-Systems-and-Development/unicorn-fy on GitHub">Fork</a>
<br />
<a class="github-button" href="https://github.com/LUCIT-Systems-and-Development/unicorn-fy/issues"
   data-icon="octicon-issue-opened"
   data-show-count="true" aria-label="Issue LUCIT-Systems-and-Development/unicorn-fy on GitHub">Issue</a>
    
</li>

    </ul>
</div>
        </nav>
    </div>
</div>
  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
              
                  
                  
              <li><img src="../../_static/lucit.png" alt="LUCIT Logo"
                       style="vertical-align: middle; margin-top: -1px"/></li>
              <li><a href="https://www.lucit.tech/unicorn-fy.html">unicorn-fy</a> &#187;</li>
                  
              
              
              <a href="../../index.html">Docs</a> &#187;
              
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Module code</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">unicorn_fy.unicorn_fy</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../../search.html" method="get">
          <input placeholder="Quick search" aria-label="Quick search" type="text" name="q" />
          <input type="submit" value="Go" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
                     |
                </li>
            
      </ul>
    </div>    

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for unicorn_fy.unicorn_fy</h1><div class="highlight"><pre>
<span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># -*- coding: utf-8 -*-</span>
<span class="c1">#</span>
<span class="c1"># File: unicorn_fy/unicorn_fy.py</span>
<span class="c1">#</span>
<span class="c1"># Part of ‘UnicornFy’</span>
<span class="c1"># Project website: https://www.lucit.tech/unicorn-fy.html</span>
<span class="c1"># Github: https://github.com/LUCIT-Systems-and-Development/unicorn-fy</span>
<span class="c1"># Documentation: https://unicorn-fy.docs.lucit.tech/</span>
<span class="c1"># PyPI: https://pypi.org/project/unicorn-fy</span>
<span class="c1"># LUCIT Online Shop: https://shop.lucit.services/software</span>
<span class="c1">#</span>
<span class="c1"># License: LSOSL - LUCIT Synergetic Open Source License</span>
<span class="c1"># https://github.com/LUCIT-Systems-and-Development/unicorn-fy/blob/master/LICENSE</span>
<span class="c1">#</span>
<span class="c1"># Author: LUCIT Systems and Development</span>
<span class="c1">#</span>
<span class="c1"># Copyright (c) 2019-2023, LUCIT Systems and Development (https://www.lucit.tech)</span>
<span class="c1"># All rights reserved.</span>
<span class="c1">#</span>
<span class="c1"># Permission is hereby granted, free of charge, to any person obtaining a</span>
<span class="c1"># copy of this software and associated documentation files (the</span>
<span class="c1"># &quot;Software&quot;), to deal in the Software without restriction, including</span>
<span class="c1"># without limitation the rights to use, copy, modify, merge, publish, dis-</span>
<span class="c1"># tribute, sublicense, and/or sell copies of the Software, and to permit</span>
<span class="c1"># persons to whom the Software is furnished to do so, subject to the fol-</span>
<span class="c1"># lowing conditions:</span>
<span class="c1">#</span>
<span class="c1"># The above copyright notice and this permission notice shall be included</span>
<span class="c1"># in all copies or substantial portions of the Software.</span>
<span class="c1">#</span>
<span class="c1"># THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS</span>
<span class="c1"># OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABIL-</span>
<span class="c1"># ITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT</span>
<span class="c1"># SHALL THE AUTHOR BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,</span>
<span class="c1"># WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</span>
<span class="c1"># OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS</span>
<span class="c1"># IN THE SOFTWARE.</span>

<span class="kn">import</span> <span class="nn">cython</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">platform</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">ujson</span> <span class="k">as</span> <span class="nn">json</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;unicorn_fy&quot;</span><span class="p">)</span>


<div class="viewcode-block" id="UnicornFy">
<a class="viewcode-back" href="../../unicorn_fy.html#unicorn_fy.unicorn_fy.UnicornFy">[docs]</a>
<span class="k">class</span> <span class="nc">UnicornFy</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Unify received data from crypto exchanges</span>

<span class="sd">    Supported exchanges:</span>
<span class="sd">        - Binance.com</span>
<span class="sd">        - Binance-com-futures</span>
<span class="sd">        - Binance-com-coin_futures</span>
<span class="sd">        - Binance-com-margin</span>
<span class="sd">        - Binance-com-isolated_margin</span>
<span class="sd">        - Binance.je</span>
<span class="sd">        - Binance.us</span>
<span class="sd">        - trBinance.com</span>
<span class="sd">        - Binance.org</span>
<span class="sd">        - Jex.com</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">VERSION</span> <span class="o">=</span> <span class="s2">&quot;0.13.1.dev&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">last_update_check_github</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;timestamp&#39;</span><span class="p">:</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">(),</span>
                                         <span class="s1">&#39;status&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">debug</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;New instance of unicorn-fy_</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">VERSION</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="s1">&#39;compiled&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">cython</span><span class="o">.</span><span class="n">compiled</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;source&#39;</span><span class="si">}</span><span class="s2"> on &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">platform</span><span class="o">.</span><span class="n">system</span><span class="p">())</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">platform</span><span class="o">.</span><span class="n">release</span><span class="p">())</span><span class="si">}</span><span class="s2"> started ...&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Entering &#39;with-context&#39; ...&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="fm">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exc_type</span><span class="p">,</span> <span class="n">exc_value</span><span class="p">,</span> <span class="n">error_traceback</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Leaving &#39;with-context&#39; ...&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">exc_type</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;An exception occurred: </span><span class="si">{</span><span class="n">exc_type</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">exc_value</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">error_traceback</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<div class="viewcode-block" id="UnicornFy.binance_org_websocket">
<a class="viewcode-back" href="../../unicorn_fy.html#unicorn_fy.unicorn_fy.UnicornFy.binance_org_websocket">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">binance_org_websocket</span><span class="p">(</span><span class="n">stream_data_json</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        unicorn_fy binance.org (incl testnet) raw_stream_data</span>

<span class="sd">        :param stream_data_json: The received raw stream data from the Binance websocket</span>
<span class="sd">        :type stream_data_json: json</span>

<span class="sd">        :return: dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Can not convert raw data from binance.org&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">stream_data_json</span></div>


<div class="viewcode-block" id="UnicornFy.binance_com_websocket">
<a class="viewcode-back" href="../../unicorn_fy.html#unicorn_fy.unicorn_fy.UnicornFy.binance_com_websocket">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">binance_com_websocket</span><span class="p">(</span><span class="n">stream_data_json</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        unicorn_fy binance.com raw_stream_data</span>

<span class="sd">        :param stream_data_json: The received raw stream data from the Binance websocket</span>
<span class="sd">        :type stream_data_json: json</span>

<span class="sd">        :return: dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">UnicornFy</span><span class="o">.</span><span class="n">binance_websocket</span><span class="p">(</span><span class="n">stream_data_json</span><span class="p">,</span> <span class="n">exchange</span><span class="o">=</span><span class="s2">&quot;binance.com&quot;</span><span class="p">,</span> <span class="n">show_deprecated_warning</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>


<div class="viewcode-block" id="UnicornFy.binance_com_margin_websocket">
<a class="viewcode-back" href="../../unicorn_fy.html#unicorn_fy.unicorn_fy.UnicornFy.binance_com_margin_websocket">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">binance_com_margin_websocket</span><span class="p">(</span><span class="n">stream_data_json</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        unicorn_fy binance.com-margin raw_stream_data</span>

<span class="sd">        :param stream_data_json: The received raw stream data from the Binance websocket</span>
<span class="sd">        :type stream_data_json: json</span>

<span class="sd">        :return: dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">UnicornFy</span><span class="o">.</span><span class="n">binance_websocket</span><span class="p">(</span><span class="n">stream_data_json</span><span class="p">,</span> <span class="n">exchange</span><span class="o">=</span><span class="s2">&quot;binance.com-margin&quot;</span><span class="p">,</span>
                                           <span class="n">show_deprecated_warning</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>


<div class="viewcode-block" id="UnicornFy.binance_com_isolated_margin_websocket">
<a class="viewcode-back" href="../../unicorn_fy.html#unicorn_fy.unicorn_fy.UnicornFy.binance_com_isolated_margin_websocket">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">binance_com_isolated_margin_websocket</span><span class="p">(</span><span class="n">stream_data_json</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        unicorn_fy binance.com-isolated_margin raw_stream_data</span>

<span class="sd">        :param stream_data_json: The received raw stream data from the Binance websocket</span>
<span class="sd">        :type stream_data_json: json</span>

<span class="sd">        :return: dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">UnicornFy</span><span class="o">.</span><span class="n">binance_websocket</span><span class="p">(</span><span class="n">stream_data_json</span><span class="p">,</span>
                                           <span class="n">exchange</span><span class="o">=</span><span class="s2">&quot;binance.com-isolated_margin&quot;</span><span class="p">,</span>
                                           <span class="n">show_deprecated_warning</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>


<div class="viewcode-block" id="UnicornFy.binance_com_futures_websocket">
<a class="viewcode-back" href="../../unicorn_fy.html#unicorn_fy.unicorn_fy.UnicornFy.binance_com_futures_websocket">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">binance_com_futures_websocket</span><span class="p">(</span><span class="n">stream_data_json</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        unicorn_fy binance.com-futures raw_stream_data</span>

<span class="sd">        :param stream_data_json: The received raw stream data from the Binance websocket</span>
<span class="sd">        :type stream_data_json: json</span>

<span class="sd">        :return: dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">UnicornFy</span><span class="o">.</span><span class="n">binance_futures_websocket</span><span class="p">(</span><span class="n">stream_data_json</span><span class="p">,</span>
                                                   <span class="n">exchange</span><span class="o">=</span><span class="s2">&quot;binance.com-futures&quot;</span><span class="p">,</span>
                                                   <span class="n">show_deprecated_warning</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>


<div class="viewcode-block" id="UnicornFy.binance_com_coin_futures_websocket">
<a class="viewcode-back" href="../../unicorn_fy.html#unicorn_fy.unicorn_fy.UnicornFy.binance_com_coin_futures_websocket">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">binance_com_coin_futures_websocket</span><span class="p">(</span><span class="n">stream_data_json</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        unicorn_fy binance.com-coin_futures raw_stream_data</span>

<span class="sd">        :param stream_data_json: The received raw stream data from the Binance websocket</span>
<span class="sd">        :type stream_data_json: json</span>

<span class="sd">        :return: dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">UnicornFy</span><span class="o">.</span><span class="n">binance_futures_websocket</span><span class="p">(</span><span class="n">stream_data_json</span><span class="p">,</span>
                                                   <span class="n">exchange</span><span class="o">=</span><span class="s2">&quot;binance.com-coin_futures&quot;</span><span class="p">,</span>
                                                   <span class="n">show_deprecated_warning</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>


<div class="viewcode-block" id="UnicornFy.binance_je_websocket">
<a class="viewcode-back" href="../../unicorn_fy.html#unicorn_fy.unicorn_fy.UnicornFy.binance_je_websocket">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">binance_je_websocket</span><span class="p">(</span><span class="n">stream_data_json</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        unicorn_fy binance.je (Jersey) raw_stream_data</span>

<span class="sd">        :param stream_data_json: The received raw stream data from the Binance websocket</span>
<span class="sd">        :type stream_data_json: json</span>

<span class="sd">        :return: dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">UnicornFy</span><span class="o">.</span><span class="n">binance_websocket</span><span class="p">(</span><span class="n">stream_data_json</span><span class="p">,</span> <span class="n">exchange</span><span class="o">=</span><span class="s2">&quot;binance.je&quot;</span><span class="p">,</span> <span class="n">show_deprecated_warning</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>


<div class="viewcode-block" id="UnicornFy.binance_us_websocket">
<a class="viewcode-back" href="../../unicorn_fy.html#unicorn_fy.unicorn_fy.UnicornFy.binance_us_websocket">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">binance_us_websocket</span><span class="p">(</span><span class="n">stream_data_json</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        unicorn_fy binance.us (US) raw_stream_data</span>

<span class="sd">        :param stream_data_json: The received raw stream data from the Binance websocket</span>
<span class="sd">        :type stream_data_json: json</span>

<span class="sd">        :return: dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">UnicornFy</span><span class="o">.</span><span class="n">binance_websocket</span><span class="p">(</span><span class="n">stream_data_json</span><span class="p">,</span> <span class="n">exchange</span><span class="o">=</span><span class="s2">&quot;binance.us&quot;</span><span class="p">,</span> <span class="n">show_deprecated_warning</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>


<div class="viewcode-block" id="UnicornFy.trbinance_com_websocket">
<a class="viewcode-back" href="../../unicorn_fy.html#unicorn_fy.unicorn_fy.UnicornFy.trbinance_com_websocket">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">trbinance_com_websocket</span><span class="p">(</span><span class="n">stream_data_json</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        unicorn_fy trbinance.com (TR) raw_stream_data</span>

<span class="sd">        :param stream_data_json: The received raw stream data from the Binance websocket</span>
<span class="sd">        :type stream_data_json: json</span>

<span class="sd">        :return: dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">UnicornFy</span><span class="o">.</span><span class="n">binance_websocket</span><span class="p">(</span><span class="n">stream_data_json</span><span class="p">,</span> <span class="n">exchange</span><span class="o">=</span><span class="s2">&quot;trbinance.com&quot;</span><span class="p">,</span> <span class="n">show_deprecated_warning</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>


<div class="viewcode-block" id="UnicornFy.binance_websocket">
<a class="viewcode-back" href="../../unicorn_fy.html#unicorn_fy.unicorn_fy.UnicornFy.binance_websocket">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">binance_websocket</span><span class="p">(</span><span class="n">stream_data_json</span><span class="p">,</span> <span class="n">exchange</span><span class="o">=</span><span class="s2">&quot;binance&quot;</span><span class="p">,</span> <span class="n">show_deprecated_warning</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        unicorn_fy binance.com raw_stream_data</span>

<span class="sd">        :param stream_data_json: The received raw stream data from the Binance websocket</span>
<span class="sd">        :type stream_data_json: json</span>

<span class="sd">        :param exchange: Exchange endpoint.</span>
<span class="sd">        :type exchange: str</span>

<span class="sd">        :param show_deprecated_warning: Show or hide warning</span>
<span class="sd">        :type show_deprecated_warning: bool</span>

<span class="sd">        :return: dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">unicorn_fied_data</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;UnicornFy-&gt;binance_websocket(&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">stream_data_json</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">show_deprecated_warning</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Using `UnicornFy.binance_websocket()` is deprecated, use &quot;</span>
                           <span class="s2">&quot;`UnicornFy.binance_com_websocket()` or `UnicornFy.binance_je_websocket()` instead!&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">UnicornFy</span><span class="o">.</span><span class="n">is_json</span><span class="p">(</span><span class="n">stream_data_json</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">stream_data_json</span>

        <span class="n">stream_data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">stream_data_json</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">stream_data</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;24hrMiniTicker&quot;</span><span class="p">:</span>
                <span class="n">stream_data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;e&#39;</span><span class="p">:</span> <span class="s2">&quot;24hrMiniTicker&quot;</span><span class="p">},</span>
                               <span class="s1">&#39;items&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">}</span>
            <span class="k">elif</span> <span class="n">stream_data</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;24hrTicker&quot;</span><span class="p">:</span>
                <span class="n">stream_data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;e&#39;</span><span class="p">:</span> <span class="s2">&quot;24hrTicker&quot;</span><span class="p">},</span>
                               <span class="s1">&#39;items&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">}</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="s2">&quot;!ticker@arr&quot;</span> <span class="ow">in</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">]:</span>
                <span class="n">stream_data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;e&#39;</span><span class="p">:</span> <span class="s2">&quot;24hrTicker&quot;</span><span class="p">},</span>
                               <span class="s1">&#39;items&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]}</span>
            <span class="k">elif</span> <span class="s2">&quot;!miniTicker@arr&quot;</span> <span class="ow">in</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">]:</span>
                <span class="n">stream_data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;e&#39;</span><span class="p">:</span> <span class="s2">&quot;24hrMiniTicker&quot;</span><span class="p">},</span>
                               <span class="s1">&#39;items&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]}</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;e&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;outboundAccountInfo&#39;</span><span class="p">:</span>
                <span class="n">stream_data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">}</span>
            <span class="k">elif</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;e&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;executionReport&#39;</span><span class="p">:</span>
                <span class="n">stream_data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">}</span>
            <span class="k">elif</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;e&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;outboundAccountPosition&#39;</span><span class="p">:</span>
                <span class="n">stream_data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">}</span>
            <span class="k">elif</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;e&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;listStatus&#39;</span><span class="p">:</span>
                <span class="n">stream_data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">}</span>
            <span class="k">elif</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;e&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;balanceUpdate&#39;</span><span class="p">:</span>
                <span class="n">stream_data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">}</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;@depth5&#39;</span><span class="p">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;depth&quot;</span>
                <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;depth_level&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span>
            <span class="k">elif</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;@depth10&#39;</span><span class="p">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;depth&quot;</span>
                <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;depth_level&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">10</span>
            <span class="k">elif</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;@depth20&#39;</span><span class="p">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;depth&quot;</span>
                <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;depth_level&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">20</span>
            <span class="k">elif</span> <span class="s2">&quot;@bookTicker&quot;</span> <span class="ow">in</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">]:</span>
                <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;bookTicker&quot;</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># return if already unicorn_fied</span>
            <span class="k">if</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;unicorn_fied&#39;</span><span class="p">]:</span>
                <span class="k">return</span> <span class="n">stream_data</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;result&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">unicorn_fied_version</span> <span class="o">=</span> <span class="p">[</span><span class="n">exchange</span><span class="p">,</span> <span class="n">UnicornFy</span><span class="o">.</span><span class="n">VERSION</span><span class="p">]</span>
                <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;unicorn_fied&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">unicorn_fied_version</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;UnicornFy-&gt;binance_websocket(</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">stream_data</span><span class="p">)</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">exchange</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">stream_data</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">unicorn_fied_version</span> <span class="o">=</span> <span class="p">[</span><span class="n">exchange</span><span class="p">,</span> <span class="n">UnicornFy</span><span class="o">.</span><span class="n">VERSION</span><span class="p">]</span>
                <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;unicorn_fied&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">unicorn_fied_version</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;UnicornFy-&gt;binance_websocket(</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">stream_data</span><span class="p">)</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">exchange</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">stream_data</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;error&#39;</span><span class="p">]:</span>
                <span class="n">unicorn_fied_version</span> <span class="o">=</span> <span class="p">[</span><span class="n">exchange</span><span class="p">,</span> <span class="n">UnicornFy</span><span class="o">.</span><span class="n">VERSION</span><span class="p">]</span>
                <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;unicorn_fied&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">unicorn_fied_version</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;UnicornFy-&gt;binance_websocket(</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">stream_data</span><span class="p">)</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">exchange</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">stream_data</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="k">if</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;aggTrade&#39;</span><span class="p">:</span>
            <span class="n">unicorn_fied_data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;stream_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;event_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;event_time&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;E&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;symbol&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;s&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;aggregate_trade_id&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;a&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;price&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;p&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;quantity&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;q&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;first_trade_id&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;f&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;last_trade_id&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;l&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;trade_time&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;T&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;is_market_maker&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;m&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;ignore&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;M&#39;</span><span class="p">]}</span>
        <span class="k">elif</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;listStatus&#39;</span><span class="p">:</span>
            <span class="n">objects</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;O&#39;</span><span class="p">]:</span>
                <span class="n">objects</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s1">&#39;symbol&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;s&#39;</span><span class="p">],</span>
                                <span class="s1">&#39;order_id&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;i&#39;</span><span class="p">],</span>
                                <span class="s1">&#39;client_order_id&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;c&#39;</span><span class="p">]})</span>
            <span class="n">unicorn_fied_data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;stream_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;s&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;@listStatus&quot;</span><span class="p">,</span>
                                 <span class="s1">&#39;event_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;event_time&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;E&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;symbol&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;s&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;order_list_id&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;g&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;contingency_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;c&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;list_status_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;l&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;list_order_status&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;L&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;list_reject_reason&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;r&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;list_client_order_id&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;C&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;transaction_time&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;T&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;objects&#39;</span><span class="p">:</span> <span class="n">objects</span><span class="p">}</span>
        <span class="k">elif</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;trade&#39;</span><span class="p">:</span>
            <span class="n">unicorn_fied_data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;stream_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;event_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;event_time&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;E&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;symbol&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;s&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;trade_id&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;t&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;price&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;p&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;quantity&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;q&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;buyer_order_id&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;b&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;seller_order_id&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;a&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;trade_time&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;T&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;is_market_maker&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;m&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;ignore&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;M&#39;</span><span class="p">]}</span>
        <span class="k">elif</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;bookTicker&#39;</span><span class="p">:</span>
            <span class="n">unicorn_fied_data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;stream_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;order_book_update_id&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;u&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;symbol&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;s&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;best_bid_price&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;b&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;best_bid_quantity&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;B&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;best_ask_price&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;a&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;best_ask_quantity&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;A&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;event_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">]}</span>
        <span class="k">elif</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;kline&#39;</span><span class="p">:</span>
            <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">UnicornFy</span><span class="o">.</span><span class="n">set_to_false_if_not_exist</span><span class="p">(</span><span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">],</span> <span class="s1">&#39;f&#39;</span><span class="p">)</span>
            <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">UnicornFy</span><span class="o">.</span><span class="n">set_to_false_if_not_exist</span><span class="p">(</span><span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">],</span> <span class="s1">&#39;L&#39;</span><span class="p">)</span>
            <span class="n">unicorn_fied_data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;stream_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;event_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;event_time&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;E&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;symbol&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;s&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;kline&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;kline_start_time&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;k&#39;</span><span class="p">][</span><span class="s1">&#39;t&#39;</span><span class="p">],</span>
                                           <span class="s1">&#39;kline_close_time&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;k&#39;</span><span class="p">][</span><span class="s1">&#39;T&#39;</span><span class="p">],</span>
                                           <span class="s1">&#39;symbol&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;k&#39;</span><span class="p">][</span><span class="s1">&#39;s&#39;</span><span class="p">],</span>
                                           <span class="s1">&#39;interval&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;k&#39;</span><span class="p">][</span><span class="s1">&#39;i&#39;</span><span class="p">],</span>
                                           <span class="s1">&#39;first_trade_id&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;f&#39;</span><span class="p">],</span>
                                           <span class="s1">&#39;last_trade_id&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;L&#39;</span><span class="p">],</span>
                                           <span class="s1">&#39;open_price&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;k&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">],</span>
                                           <span class="s1">&#39;close_price&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;k&#39;</span><span class="p">][</span><span class="s1">&#39;c&#39;</span><span class="p">],</span>
                                           <span class="s1">&#39;high_price&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;k&#39;</span><span class="p">][</span><span class="s1">&#39;h&#39;</span><span class="p">],</span>
                                           <span class="s1">&#39;low_price&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;k&#39;</span><span class="p">][</span><span class="s1">&#39;l&#39;</span><span class="p">],</span>
                                           <span class="s1">&#39;base_volume&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;k&#39;</span><span class="p">][</span><span class="s1">&#39;v&#39;</span><span class="p">],</span>
                                           <span class="s1">&#39;number_of_trades&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;k&#39;</span><span class="p">][</span><span class="s1">&#39;n&#39;</span><span class="p">],</span>
                                           <span class="s1">&#39;is_closed&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;k&#39;</span><span class="p">][</span><span class="s1">&#39;x&#39;</span><span class="p">],</span>
                                           <span class="s1">&#39;quote&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;k&#39;</span><span class="p">][</span><span class="s1">&#39;q&#39;</span><span class="p">],</span>
                                           <span class="s1">&#39;taker_by_base_asset_volume&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;k&#39;</span><span class="p">][</span><span class="s1">&#39;V&#39;</span><span class="p">],</span>
                                           <span class="s1">&#39;taker_by_quote_asset_volume&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;k&#39;</span><span class="p">][</span><span class="s1">&#39;Q&#39;</span><span class="p">],</span>
                                           <span class="s1">&#39;ignore&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;k&#39;</span><span class="p">][</span><span class="s1">&#39;B&#39;</span><span class="p">]}}</span>
        <span class="k">elif</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;24hrMiniTicker&#39;</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">]:</span>
                    <span class="k">pass</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;!miniTicker@arr&#39;</span>
            <span class="n">unicorn_fied_data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;stream_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;event_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="p">[]}</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;items&#39;</span><span class="p">]:</span>
                    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;stream_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;event_type&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;e&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;event_time&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;E&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;symbol&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;s&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;close_price&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;c&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;open_price&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;o&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;high_price&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;h&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;low_price&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;l&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;taker_by_base_asset_volume&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;v&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;taker_by_quote_asset_volume&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;q&#39;</span><span class="p">]}</span>
                    <span class="n">unicorn_fied_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;stream_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;event_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;event_time&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;E&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;symbol&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;s&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;close_price&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;c&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;open_price&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;high_price&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;h&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;low_price&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;l&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;taker_by_base_asset_volume&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;v&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;taker_by_quote_asset_volume&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;q&#39;</span><span class="p">]}</span>
                    <span class="n">unicorn_fied_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">error_msg</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;UnicornFy-&gt;binance_com_futures_websocket(</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">stream_data</span><span class="p">)</span><span class="si">}</span><span class="s2">) - &quot;</span>
                                    <span class="sa">f</span><span class="s2">&quot;error: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">stream_data</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;24hrTicker&#39;</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">]:</span>
                    <span class="k">pass</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;!ticker@arr&#39;</span>
            <span class="n">unicorn_fied_data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;stream_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;event_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="p">[]}</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;items&#39;</span><span class="p">]:</span>
                    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;stream_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;event_type&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;e&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;event_time&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;E&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;symbol&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;s&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;price_change&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;p&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;price_change_percent&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;P&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;weighted_average_price&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;w&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;trade_before_24h_window&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;last_price&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;c&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;last_quantity&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;Q&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;best_bid_price&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;best_bid_quantity&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;B&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;best_ask_price&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;best_ask_quantity&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;open_price&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;o&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;high_price&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;h&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;low_price&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;l&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;total_traded_base_asset_volume&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;v&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;total_traded_quote_asset_volume&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;q&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;statistics_open_time&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;O&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;statistics_close_time&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;C&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;first_trade_id&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;F&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;last_trade_id&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;L&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;total_nr_of_trades&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;n&#39;</span><span class="p">]}</span>
                    <span class="n">unicorn_fied_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;stream_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">],</span>
                        <span class="s1">&#39;event_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">],</span>
                        <span class="s1">&#39;event_time&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;E&#39;</span><span class="p">],</span>
                        <span class="s1">&#39;symbol&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;s&#39;</span><span class="p">],</span>
                        <span class="s1">&#39;price_change&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;p&#39;</span><span class="p">],</span>
                        <span class="s1">&#39;price_change_percent&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;P&#39;</span><span class="p">],</span>
                        <span class="s1">&#39;weighted_average_price&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;w&#39;</span><span class="p">],</span>
                        <span class="s1">&#39;trade_before_24h_window&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;x&#39;</span><span class="p">],</span>
                        <span class="s1">&#39;last_price&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;c&#39;</span><span class="p">],</span>
                        <span class="s1">&#39;last_quantity&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;Q&#39;</span><span class="p">],</span>
                        <span class="s1">&#39;best_bid_price&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;b&#39;</span><span class="p">],</span>
                        <span class="s1">&#39;best_bid_quantity&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;B&#39;</span><span class="p">],</span>
                        <span class="s1">&#39;best_ask_price&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;a&#39;</span><span class="p">],</span>
                        <span class="s1">&#39;best_ask_quantity&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;A&#39;</span><span class="p">],</span>
                        <span class="s1">&#39;open_price&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">],</span>
                        <span class="s1">&#39;high_price&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;h&#39;</span><span class="p">],</span>
                        <span class="s1">&#39;low_price&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;l&#39;</span><span class="p">],</span>
                        <span class="s1">&#39;total_traded_base_asset_volume&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;v&#39;</span><span class="p">],</span>
                        <span class="s1">&#39;total_traded_quote_asset_volume&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;q&#39;</span><span class="p">],</span>
                        <span class="s1">&#39;statistics_open_time&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;O&#39;</span><span class="p">],</span>
                        <span class="s1">&#39;statistics_close_time&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;C&#39;</span><span class="p">],</span>
                        <span class="s1">&#39;first_trade_id&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;F&#39;</span><span class="p">],</span>
                        <span class="s1">&#39;last_trade_id&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;L&#39;</span><span class="p">],</span>
                        <span class="s1">&#39;total_nr_of_trades&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;n&#39;</span><span class="p">]}</span>
                <span class="n">unicorn_fied_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;depth&#39;</span><span class="p">:</span>
            <span class="n">unicorn_fied_data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;stream_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;event_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;symbol&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">][:</span><span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;@&#39;</span><span class="p">)]</span><span class="o">.</span><span class="n">upper</span><span class="p">(),</span>
                                 <span class="s1">&#39;last_update_id&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;lastUpdateId&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;bids&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;bids&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;asks&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;asks&#39;</span><span class="p">]}</span>
        <span class="k">elif</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;depthUpdate&#39;</span><span class="p">:</span>
            <span class="n">unicorn_fied_data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;stream_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;event_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;event_time&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;E&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;symbol&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;s&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;first_update_id_in_event&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;U&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;final_update_id_in_event&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;u&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;bids&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;b&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;asks&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;a&#39;</span><span class="p">]}</span>
        <span class="k">elif</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;outboundAccountInfo&#39;</span><span class="p">:</span>
            <span class="n">unicorn_fied_data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;stream_type&#39;</span><span class="p">:</span> <span class="s1">&#39;!userData@arr&#39;</span><span class="p">,</span>
                                 <span class="s1">&#39;event_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;event_time&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;E&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;maker_commission_rate&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;m&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;taker_commission_rate&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;t&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;buyer_commission_rate&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;b&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;seller_commission_rate&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;s&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;can_trade&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;T&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;can_withdraw&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;W&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;can_deposit&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;D&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;balances&#39;</span><span class="p">:</span> <span class="p">[],</span>
                                 <span class="s1">&#39;account_permissions&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;P&#39;</span><span class="p">]}</span>
            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;B&#39;</span><span class="p">]:</span>
                <span class="n">new_item</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;asset&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;free&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;f&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;locked&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;l&#39;</span><span class="p">]}</span>
                <span class="n">unicorn_fied_data</span><span class="p">[</span><span class="s1">&#39;balances&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="p">[</span><span class="n">new_item</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;outboundAccountPosition&#39;</span><span class="p">:</span>
            <span class="n">unicorn_fied_data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;stream_type&#39;</span><span class="p">:</span> <span class="s1">&#39;!userData@arr&#39;</span><span class="p">,</span>
                                 <span class="s1">&#39;event_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;event_time&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;E&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;last_update_time&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;u&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;balances&#39;</span><span class="p">:</span> <span class="p">[]}</span>
            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;B&#39;</span><span class="p">]:</span>
                <span class="n">new_item</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;asset&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;free&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;f&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;locked&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;l&#39;</span><span class="p">]}</span>
                <span class="n">unicorn_fied_data</span><span class="p">[</span><span class="s1">&#39;balances&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="p">[</span><span class="n">new_item</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;balanceUpdate&#39;</span><span class="p">:</span>
            <span class="n">unicorn_fied_data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;stream_type&#39;</span><span class="p">:</span> <span class="s1">&#39;!userData@arr&#39;</span><span class="p">,</span>
                                 <span class="s1">&#39;event_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;event_time&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;E&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;asset&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;a&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;balance_delta&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;d&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;clear_time&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;T&#39;</span><span class="p">]}</span>
        <span class="k">elif</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;executionReport&#39;</span><span class="p">:</span>
            <span class="n">unicorn_fied_data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;stream_type&#39;</span><span class="p">:</span> <span class="s1">&#39;!userData@arr&#39;</span><span class="p">,</span>
                                 <span class="s1">&#39;event_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;event_time&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;E&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;symbol&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;s&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;client_order_id&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;c&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;side&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;S&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;order_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;time_in_force&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;f&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;order_quantity&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;q&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;order_price&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;p&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;stop_price&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;P&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;iceberg_quantity&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;F&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;ignore_g&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;g&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;original_client_order_id&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;C&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;current_execution_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;x&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;current_order_status&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;X&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;order_reject_reason&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;r&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;order_id&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;i&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;last_executed_quantity&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;l&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;cumulative_filled_quantity&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;z&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;last_executed_price&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;L&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;commission_amount&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;n&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;commission_asset&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;N&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;transaction_time&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;T&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;trade_id&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;t&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;ignore_I&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;I&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;is_order_working&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;w&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;is_trade_maker_side&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;m&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;ignore_M&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;M&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;order_creation_time&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;O&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;cumulative_quote_asset_transacted_quantity&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;Z&#39;</span><span class="p">],</span>
                                 <span class="s1">&#39;last_quote_asset_transacted_quantity&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;Y&#39;</span><span class="p">]}</span>
        <span class="n">unicorn_fied_version</span> <span class="o">=</span> <span class="p">[</span><span class="n">exchange</span><span class="p">,</span> <span class="n">UnicornFy</span><span class="o">.</span><span class="n">VERSION</span><span class="p">]</span>
        <span class="n">unicorn_fied_data</span><span class="p">[</span><span class="s1">&#39;unicorn_fied&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">unicorn_fied_version</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;UnicornFy-&gt;binance_com_futures_websocket(&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">unicorn_fied_data</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">unicorn_fied_data</span></div>


<div class="viewcode-block" id="UnicornFy.binance_futures_websocket">
<a class="viewcode-back" href="../../unicorn_fy.html#unicorn_fy.unicorn_fy.UnicornFy.binance_futures_websocket">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">binance_futures_websocket</span><span class="p">(</span><span class="n">stream_data_json</span><span class="p">,</span> <span class="n">exchange</span><span class="o">=</span><span class="s2">&quot;binance.com-futures&quot;</span><span class="p">,</span> <span class="n">show_deprecated_warning</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        unicorn_fy binance.com-futures raw_stream_data</span>

<span class="sd">        :param stream_data_json: The received raw stream data from the Binance websocket</span>
<span class="sd">        :type stream_data_json: json</span>

<span class="sd">        :param exchange: Exchange endpoint.</span>
<span class="sd">        :type exchange: str</span>

<span class="sd">        :param show_deprecated_warning: Show or hide warning</span>
<span class="sd">        :type show_deprecated_warning: bool</span>

<span class="sd">        :return: dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">unicorn_fied_data</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;UnicornFy-&gt;binance_futures_websocket(&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">stream_data_json</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">show_deprecated_warning</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">if</span> <span class="n">UnicornFy</span><span class="o">.</span><span class="n">is_json</span><span class="p">(</span><span class="n">stream_data_json</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">stream_data_json</span>

        <span class="n">stream_data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">stream_data_json</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">stream_data</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">]</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;24hrMiniTicker&quot;</span><span class="p">,</span>
                                       <span class="s2">&quot;24hrTicker&quot;</span><span class="p">,</span>
                                       <span class="s2">&quot;markPriceUpdate&quot;</span><span class="p">,</span>
                                       <span class="s2">&quot;indexPriceUpdate&quot;</span><span class="p">]:</span>
                <span class="n">stream_data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;e&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">]},</span>
                               <span class="s1">&#39;items&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">}</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="s2">&quot;!ticker@arr&quot;</span> <span class="ow">in</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">]:</span>
                <span class="n">stream_data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;e&#39;</span><span class="p">:</span> <span class="s2">&quot;24hrTicker&quot;</span><span class="p">},</span>
                               <span class="s1">&#39;items&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]}</span>
            <span class="k">elif</span> <span class="s2">&quot;!miniTicker@arr&quot;</span> <span class="ow">in</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">]:</span>
                <span class="n">stream_data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;e&#39;</span><span class="p">:</span> <span class="s2">&quot;24hrMiniTicker&quot;</span><span class="p">},</span>
                               <span class="s1">&#39;items&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]}</span>
            <span class="k">elif</span> <span class="s2">&quot;!markPriceUpdate@arr&quot;</span> <span class="ow">in</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">]:</span>
                <span class="n">stream_data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;e&#39;</span><span class="p">:</span> <span class="s2">&quot;markPriceUpdate&quot;</span><span class="p">},</span>
                               <span class="s1">&#39;items&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]}</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;e&#39;</span><span class="p">]</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;bookTicker&#39;</span><span class="p">,</span>
                                    <span class="s1">&#39;balanceUpdate&#39;</span><span class="p">,</span>
                                    <span class="s1">&#39;forceOrder&#39;</span><span class="p">,</span>
                                    <span class="s1">&#39;ORDER_TRADE_UPDATE&#39;</span><span class="p">,</span>
                                    <span class="s1">&#39;ACCOUNT_UPDATE&#39;</span><span class="p">,</span>
                                    <span class="s1">&#39;ACCOUNT_CONFIG_UPDATE&#39;</span><span class="p">,</span>
                                    <span class="s1">&#39;MARGIN_CALL&#39;</span><span class="p">]:</span>
                <span class="n">stream_data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">}</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;@depth5&#39;</span><span class="p">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;depth_level&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span>
            <span class="k">elif</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;@depth10&#39;</span><span class="p">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;depth_level&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">10</span>
            <span class="k">elif</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;@depth20&#39;</span><span class="p">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;depth_level&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">20</span>
            <span class="k">elif</span> <span class="s2">&quot;@bookTicker&quot;</span> <span class="ow">in</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">]:</span>
                <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;bookTicker&quot;</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># return if already unicorn_fied</span>
            <span class="k">if</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;unicorn_fied&#39;</span><span class="p">]:</span>
                <span class="k">return</span> <span class="n">stream_data</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;result&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">unicorn_fied_version</span> <span class="o">=</span> <span class="p">[</span><span class="n">exchange</span><span class="p">,</span> <span class="n">UnicornFy</span><span class="o">.</span><span class="n">VERSION</span><span class="p">]</span>
                <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;unicorn_fied&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">unicorn_fied_version</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;UnicornFy-&gt;binance_futures_websocket(</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">stream_data</span><span class="p">)</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">exchange</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">stream_data</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">unicorn_fied_version</span> <span class="o">=</span> <span class="p">[</span><span class="n">exchange</span><span class="p">,</span> <span class="n">UnicornFy</span><span class="o">.</span><span class="n">VERSION</span><span class="p">]</span>
                <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;unicorn_fied&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">unicorn_fied_version</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;UnicornFy-&gt;binance_futures_websocket(</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">stream_data</span><span class="p">)</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">exchange</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">stream_data</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;error&#39;</span><span class="p">]:</span>
                <span class="n">unicorn_fied_version</span> <span class="o">=</span> <span class="p">[</span><span class="n">exchange</span><span class="p">,</span> <span class="n">UnicornFy</span><span class="o">.</span><span class="n">VERSION</span><span class="p">]</span>
                <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;unicorn_fied&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">unicorn_fied_version</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;UnicornFy-&gt;binance_futures_websocket(</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">stream_data</span><span class="p">)</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">exchange</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">stream_data</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;aggTrade&#39;</span><span class="p">:</span>
                <span class="n">unicorn_fied_data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;stream_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;event_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;event_time&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;E&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;symbol&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;s&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;aggregate_trade_id&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;a&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;price&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;p&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;quantity&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;q&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;first_trade_id&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;f&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;last_trade_id&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;l&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;trade_time&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;T&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;is_market_maker&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;m&#39;</span><span class="p">]}</span>
            <span class="k">elif</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;kline&#39;</span> <span class="ow">or</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;continuous_kline&#39;</span><span class="p">:</span>
                <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">UnicornFy</span><span class="o">.</span><span class="n">set_to_false_if_not_exist</span><span class="p">(</span><span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">],</span> <span class="s1">&#39;f&#39;</span><span class="p">)</span>
                <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">UnicornFy</span><span class="o">.</span><span class="n">set_to_false_if_not_exist</span><span class="p">(</span><span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">],</span> <span class="s1">&#39;L&#39;</span><span class="p">)</span>
                <span class="n">unicorn_fied_data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;stream_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;event_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;event_time&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;E&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;kline&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;kline_start_time&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;k&#39;</span><span class="p">][</span><span class="s1">&#39;t&#39;</span><span class="p">],</span>
                                               <span class="s1">&#39;kline_close_time&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;k&#39;</span><span class="p">][</span><span class="s1">&#39;T&#39;</span><span class="p">],</span>
                                               <span class="s1">&#39;interval&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;k&#39;</span><span class="p">][</span><span class="s1">&#39;i&#39;</span><span class="p">],</span>
                                               <span class="s1">&#39;first_trade_id&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;f&#39;</span><span class="p">],</span>
                                               <span class="s1">&#39;last_trade_id&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;L&#39;</span><span class="p">],</span>
                                               <span class="s1">&#39;open_price&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;k&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">],</span>
                                               <span class="s1">&#39;close_price&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;k&#39;</span><span class="p">][</span><span class="s1">&#39;c&#39;</span><span class="p">],</span>
                                               <span class="s1">&#39;high_price&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;k&#39;</span><span class="p">][</span><span class="s1">&#39;h&#39;</span><span class="p">],</span>
                                               <span class="s1">&#39;low_price&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;k&#39;</span><span class="p">][</span><span class="s1">&#39;l&#39;</span><span class="p">],</span>
                                               <span class="s1">&#39;base_volume&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;k&#39;</span><span class="p">][</span><span class="s1">&#39;v&#39;</span><span class="p">],</span>
                                               <span class="s1">&#39;number_of_trades&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;k&#39;</span><span class="p">][</span><span class="s1">&#39;n&#39;</span><span class="p">],</span>
                                               <span class="s1">&#39;is_closed&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;k&#39;</span><span class="p">][</span><span class="s1">&#39;x&#39;</span><span class="p">],</span>
                                               <span class="s1">&#39;quote&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;k&#39;</span><span class="p">][</span><span class="s1">&#39;q&#39;</span><span class="p">],</span>
                                               <span class="s1">&#39;taker_by_base_asset_volume&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;k&#39;</span><span class="p">][</span><span class="s1">&#39;V&#39;</span><span class="p">],</span>
                                               <span class="s1">&#39;taker_by_quote_asset_volume&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;k&#39;</span><span class="p">][</span><span class="s1">&#39;Q&#39;</span><span class="p">]}}</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">unicorn_fied_data</span><span class="p">[</span><span class="s1">&#39;symbol&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;s&#39;</span><span class="p">]</span>
                    <span class="n">unicorn_fied_data</span><span class="p">[</span><span class="s1">&#39;kline&#39;</span><span class="p">][</span><span class="s1">&#39;symbol&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;k&#39;</span><span class="p">][</span><span class="s1">&#39;s&#39;</span><span class="p">]</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="n">unicorn_fied_data</span><span class="p">[</span><span class="s1">&#39;pair&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;ps&#39;</span><span class="p">]</span>
                    <span class="n">unicorn_fied_data</span><span class="p">[</span><span class="s1">&#39;contract_type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;ct&#39;</span><span class="p">]</span>
            <span class="k">elif</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;indexPrice_kline&#39;</span> <span class="ow">or</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;markPrice_kline&#39;</span><span class="p">:</span>
                <span class="n">unicorn_fied_data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;stream_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;event_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;event_time&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;E&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;pair&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;ps&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;kline&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;kline_start_time&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;k&#39;</span><span class="p">][</span><span class="s1">&#39;t&#39;</span><span class="p">],</span>
                                               <span class="s1">&#39;kline_close_time&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;k&#39;</span><span class="p">][</span><span class="s1">&#39;T&#39;</span><span class="p">],</span>
                                               <span class="s1">&#39;interval&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;k&#39;</span><span class="p">][</span><span class="s1">&#39;i&#39;</span><span class="p">],</span>
                                               <span class="s1">&#39;open_price&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;k&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">],</span>
                                               <span class="s1">&#39;close_price&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;k&#39;</span><span class="p">][</span><span class="s1">&#39;c&#39;</span><span class="p">],</span>
                                               <span class="s1">&#39;high_price&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;k&#39;</span><span class="p">][</span><span class="s1">&#39;h&#39;</span><span class="p">],</span>
                                               <span class="s1">&#39;low_price&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;k&#39;</span><span class="p">][</span><span class="s1">&#39;l&#39;</span><span class="p">],</span>
                                               <span class="s1">&#39;number_of_basic_data&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;k&#39;</span><span class="p">][</span><span class="s1">&#39;n&#39;</span><span class="p">],</span>
                                               <span class="s1">&#39;is_closed&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;k&#39;</span><span class="p">][</span><span class="s1">&#39;x&#39;</span><span class="p">]}}</span>

                <span class="k">if</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;markPrice_kline&#39;</span><span class="p">:</span>
                    <span class="n">unicorn_fied_data</span><span class="p">[</span><span class="s1">&#39;kline&#39;</span><span class="p">][</span><span class="s1">&#39;symbol&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;k&#39;</span><span class="p">][</span><span class="s1">&#39;s&#39;</span><span class="p">]</span>
            <span class="k">elif</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;bookTicker&#39;</span><span class="p">:</span>
                <span class="n">unicorn_fied_data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;stream_type&#39;</span><span class="p">:</span> <span class="s1">&#39;bookTicker&#39;</span><span class="p">,</span>
                                     <span class="s1">&#39;order_book_update_id&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;u&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;symbol&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;s&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;best_bid_price&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;b&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;best_bid_quantity&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;B&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;best_ask_price&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;a&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;best_ask_quantity&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;A&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;event_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">]}</span>
                <span class="k">if</span> <span class="s1">&#39;ps&#39;</span> <span class="ow">in</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]:</span>
                    <span class="n">unicorn_fied_data</span><span class="p">[</span><span class="s1">&#39;pair&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;ps&#39;</span><span class="p">]</span>
            <span class="k">elif</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;indexPriceUpdate&#39;</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">]:</span>
                        <span class="k">pass</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;!indexPrice@arr&#39;</span>
                <span class="n">unicorn_fied_data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;stream_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;event_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="p">[]}</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;items&#39;</span><span class="p">]:</span>
                        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;stream_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">],</span>
                                <span class="s1">&#39;event_type&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;e&#39;</span><span class="p">],</span>
                                <span class="s1">&#39;event_time&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;E&#39;</span><span class="p">],</span>
                                <span class="s1">&#39;pair&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;i&#39;</span><span class="p">],</span>
                                <span class="s1">&#39;index_price&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;p&#39;</span><span class="p">]}</span>
                        <span class="n">unicorn_fied_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;stream_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;event_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;event_time&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;E&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;pair&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;i&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;index_price&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;p&#39;</span><span class="p">]}</span>
                    <span class="n">unicorn_fied_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;markPriceUpdate&#39;</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">]:</span>
                        <span class="k">pass</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;!markPrice@arr&#39;</span>
                <span class="n">unicorn_fied_data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;stream_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;event_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="p">[]}</span>

                <span class="k">try</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;items&#39;</span><span class="p">]:</span>
                        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;stream_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">],</span>
                                <span class="s1">&#39;event_type&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;e&#39;</span><span class="p">],</span>
                                <span class="s1">&#39;event_time&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;E&#39;</span><span class="p">],</span>
                                <span class="s1">&#39;symbol&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;s&#39;</span><span class="p">],</span>
                                <span class="s1">&#39;mark_price&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;p&#39;</span><span class="p">],</span>
                                <span class="s1">&#39;estimated_settle_price&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;P&#39;</span><span class="p">],</span>
                                <span class="s1">&#39;funding_rate&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;r&#39;</span><span class="p">],</span>
                                <span class="s1">&#39;next_funding_time&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;T&#39;</span><span class="p">]}</span>
                        <span class="k">if</span> <span class="s1">&#39;i&#39;</span> <span class="ow">in</span> <span class="n">item</span><span class="p">:</span>
                            <span class="n">data</span><span class="p">[</span><span class="s1">&#39;index_price&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;i&#39;</span><span class="p">]</span>
                        <span class="n">unicorn_fied_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;stream_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;event_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;event_time&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;E&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;symbol&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;s&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;mark_price&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;p&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;estimated_settle_price&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;P&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;funding_rate&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;r&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;next_funding_time&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;T&#39;</span><span class="p">]}</span>
                    <span class="k">if</span> <span class="s1">&#39;i&#39;</span> <span class="ow">in</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]:</span>
                        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;index_price&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;i&#39;</span><span class="p">]</span>
                    <span class="n">unicorn_fied_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;forceOrder&#39;</span><span class="p">:</span>
<span class="w">                </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">                    url: https://binance-docs.github.io/apidocs/futures/en/#liquidation-order-streams</span>
<span class="sd">                    ex:</span>
<span class="sd">                    {</span>
<span class="sd">                        &quot;e&quot;:&quot;forceOrder&quot;,                   // Event Type</span>
<span class="sd">                        &quot;E&quot;:1568014460893,                  // Event Time</span>
<span class="sd">                        &quot;o&quot;:{</span>
<span class="sd">                            &quot;s&quot;:&quot;BTCUSDT&quot;,                   // Symbol</span>
<span class="sd">                            &quot;S&quot;:&quot;SELL&quot;,                      // Side</span>
<span class="sd">                            &quot;o&quot;:&quot;LIMIT&quot;,                     // Order Type</span>
<span class="sd">                            &quot;f&quot;:&quot;IOC&quot;,                       // Time in Force</span>
<span class="sd">                            &quot;q&quot;:&quot;0.014&quot;,                     // Original Quantity</span>
<span class="sd">                            &quot;p&quot;:&quot;9910&quot;,                      // Price</span>
<span class="sd">                            &quot;ap&quot;:&quot;9910&quot;,                     // Average Price</span>
<span class="sd">                            &quot;X&quot;:&quot;FILLED&quot;,                    // Order Status</span>
<span class="sd">                            &quot;l&quot;:&quot;0.014&quot;,                     // Order Last Filled Quantity</span>
<span class="sd">                            &quot;z&quot;:&quot;0.014&quot;,                     // Order Filled Accumulated Quantity</span>
<span class="sd">                            &quot;T&quot;:1568014460893,              // Order Trade Time</span>
<span class="sd">                        }</span>
<span class="sd">                    }</span>
<span class="sd">                &#39;&#39;&#39;</span>
                <span class="n">unicorn_fied_data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;stream_type&#39;</span><span class="p">:</span> <span class="s1">&#39;forceOrder&#39;</span><span class="p">,</span>
                                     <span class="s1">&#39;event_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;event_time&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;E&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;symbol&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">][</span><span class="s1">&#39;s&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;side&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">][</span><span class="s1">&#39;S&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;order_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;time_in_force&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">][</span><span class="s1">&#39;f&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;original_quantity&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">][</span><span class="s1">&#39;q&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;price&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">][</span><span class="s1">&#39;p&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;avg_price&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">][</span><span class="s1">&#39;ap&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;order_status&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">][</span><span class="s1">&#39;X&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;last_executed_quantity&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">][</span><span class="s1">&#39;l&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;cumulative_filled_quantity&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">][</span><span class="s1">&#39;z&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;transaction_time&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">][</span><span class="s1">&#39;T&#39;</span><span class="p">]}</span>
                <span class="k">if</span> <span class="s1">&#39;ps&#39;</span> <span class="ow">in</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">]:</span>
                    <span class="n">unicorn_fied_data</span><span class="p">[</span><span class="s1">&#39;pair&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">][</span><span class="s1">&#39;ps&#39;</span><span class="p">]</span>
            <span class="k">elif</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;compositeIndex&#39;</span><span class="p">:</span>
<span class="w">                </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">                    url: https://binance-docs.github.io/apidocs/futures/en/#composite-index-symbol-information-streams</span>
<span class="sd">                    ex:</span>
<span class="sd">                    {</span>
<span class="sd">                      &quot;e&quot;:&quot;compositeIndex&quot;,     // Event type</span>
<span class="sd">                      &quot;E&quot;:1602310596000,        // Event time</span>
<span class="sd">                      &quot;s&quot;:&quot;DEFIUSDT&quot;,           // Symbol</span>
<span class="sd">                      &quot;p&quot;:&quot;554.41604065&quot;,       // Price</span>
<span class="sd">                      &quot;C&quot;:&quot;baseAsset&quot;,</span>
<span class="sd">                      &quot;c&quot;:[                     // Composition</span>
<span class="sd">                        {</span>
<span class="sd">                            &quot;b&quot;:&quot;BAL&quot;,          // Base asset</span>
<span class="sd">                            &quot;q&quot;:&quot;USDT&quot;,         // Quote asset</span>
<span class="sd">                            &quot;w&quot;:&quot;1.04884844&quot;,   // Weight in quantity</span>
<span class="sd">                            &quot;W&quot;:&quot;0.01457800&quot;,   // Weight in percentage</span>
<span class="sd">                            &quot;i&quot;:&quot;24.33521021&quot;   // Index price</span>
<span class="sd">                        },</span>
<span class="sd">                        {</span>
<span class="sd">                            &quot;b&quot;:&quot;BAND&quot;,</span>
<span class="sd">                            &quot;q&quot;:&quot;USDT&quot; ,</span>
<span class="sd">                            &quot;w&quot;:&quot;3.53782729&quot;,</span>
<span class="sd">                            &quot;W&quot;:&quot;0.03935200&quot;,</span>
<span class="sd">                            &quot;i&quot;:&quot;7.26420084&quot;</span>
<span class="sd">                        }</span>
<span class="sd">                      ]</span>
<span class="sd">                    }</span>
<span class="sd">                &#39;&#39;&#39;</span>
                <span class="n">unicorn_fied_data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;stream_type&#39;</span><span class="p">:</span> <span class="s1">&#39;compositeIndex&#39;</span><span class="p">,</span>
                                     <span class="s1">&#39;event_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;event_time&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;E&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;symbol&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;s&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;price&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;p&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;composition&#39;</span><span class="p">:</span> <span class="p">[]}</span>
                <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;c&#39;</span><span class="p">]:</span>
                    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;base_asset&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;quote_asset&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;q&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;weight_quantity&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;w&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;weight_percentage&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;W&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;index_price&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;i&#39;</span><span class="p">]}</span>
                    <span class="n">unicorn_fied_data</span><span class="p">[</span><span class="s1">&#39;composition&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;24hrMiniTicker&#39;</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">]:</span>
                        <span class="k">pass</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;!miniTicker@arr&#39;</span>
                <span class="n">unicorn_fied_data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;stream_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;event_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="p">[]}</span>

                <span class="k">try</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;items&#39;</span><span class="p">]:</span>
                        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;stream_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">],</span>
                                <span class="s1">&#39;event_type&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;e&#39;</span><span class="p">],</span>
                                <span class="s1">&#39;event_time&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;E&#39;</span><span class="p">],</span>
                                <span class="s1">&#39;symbol&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;s&#39;</span><span class="p">],</span>
                                <span class="s1">&#39;close_price&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;c&#39;</span><span class="p">],</span>
                                <span class="s1">&#39;open_price&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;o&#39;</span><span class="p">],</span>
                                <span class="s1">&#39;high_price&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;h&#39;</span><span class="p">],</span>
                                <span class="s1">&#39;low_price&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;l&#39;</span><span class="p">],</span>
                                <span class="s1">&#39;total_traded_base_asset_volume&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;v&#39;</span><span class="p">],</span>
                                <span class="s1">&#39;total_traded_quote_asset_volume&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;q&#39;</span><span class="p">]}</span>
                        <span class="k">if</span> <span class="s1">&#39;ps&#39;</span> <span class="ow">in</span> <span class="n">item</span><span class="p">:</span>
                            <span class="n">data</span><span class="p">[</span><span class="s1">&#39;pair&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;ps&#39;</span><span class="p">]</span>
                        <span class="n">unicorn_fied_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;stream_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;event_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;event_time&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;E&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;symbol&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;s&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;close_price&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;c&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;open_price&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;high_price&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;h&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;low_price&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;l&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;total_traded_base_asset_volume&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;v&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;total_traded_quote_asset_volume&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;q&#39;</span><span class="p">]}</span>
                    <span class="k">if</span> <span class="s1">&#39;ps&#39;</span> <span class="ow">in</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]:</span>
                        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;pair&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;ps&#39;</span><span class="p">]</span>
                    <span class="n">unicorn_fied_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;24hrTicker&#39;</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">]:</span>
                        <span class="k">pass</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;!ticker@arr&#39;</span>
                <span class="n">unicorn_fied_data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;stream_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;event_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="p">[]}</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;items&#39;</span><span class="p">]:</span>
                        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;stream_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">],</span>
                                <span class="s1">&#39;event_type&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;e&#39;</span><span class="p">],</span>
                                <span class="s1">&#39;event_time&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;E&#39;</span><span class="p">],</span>
                                <span class="s1">&#39;symbol&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;s&#39;</span><span class="p">],</span>
                                <span class="s1">&#39;price_change&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;p&#39;</span><span class="p">],</span>
                                <span class="s1">&#39;price_change_percent&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;P&#39;</span><span class="p">],</span>
                                <span class="s1">&#39;weighted_average_price&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;w&#39;</span><span class="p">],</span>
                                <span class="s1">&#39;last_price&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;c&#39;</span><span class="p">],</span>
                                <span class="s1">&#39;last_quantity&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;Q&#39;</span><span class="p">],</span>
                                <span class="s1">&#39;open_price&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;o&#39;</span><span class="p">],</span>
                                <span class="s1">&#39;high_price&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;h&#39;</span><span class="p">],</span>
                                <span class="s1">&#39;low_price&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;l&#39;</span><span class="p">],</span>
                                <span class="s1">&#39;total_traded_base_asset_volume&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;v&#39;</span><span class="p">],</span>
                                <span class="s1">&#39;total_traded_quote_asset_volume&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;q&#39;</span><span class="p">],</span>
                                <span class="s1">&#39;statistics_open_time&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;O&#39;</span><span class="p">],</span>
                                <span class="s1">&#39;statistics_close_time&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;C&#39;</span><span class="p">],</span>
                                <span class="s1">&#39;first_trade_id&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;F&#39;</span><span class="p">],</span>
                                <span class="s1">&#39;last_trade_id&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;L&#39;</span><span class="p">],</span>
                                <span class="s1">&#39;total_nr_of_trades&#39;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;n&#39;</span><span class="p">]}</span>
                        <span class="k">if</span> <span class="s1">&#39;ps&#39;</span> <span class="ow">in</span> <span class="n">item</span><span class="p">:</span>
                            <span class="n">data</span><span class="p">[</span><span class="s1">&#39;pair&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;ps&#39;</span><span class="p">]</span>
                        <span class="n">unicorn_fied_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;stream_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;event_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;event_time&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;E&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;symbol&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;s&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;price_change&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;p&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;price_change_percent&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;P&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;weighted_average_price&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;w&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;last_price&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;c&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;last_quantity&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;Q&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;open_price&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;high_price&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;h&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;low_price&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;l&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;total_traded_base_asset_volume&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;v&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;total_traded_quote_asset_volume&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;q&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;statistics_open_time&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;O&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;statistics_close_time&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;C&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;first_trade_id&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;F&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;last_trade_id&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;L&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;total_nr_of_trades&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;n&#39;</span><span class="p">]}</span>
                    <span class="k">if</span> <span class="s1">&#39;ps&#39;</span> <span class="ow">in</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]:</span>
                        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;pair&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;ps&#39;</span><span class="p">]</span>
                    <span class="n">unicorn_fied_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;depthUpdate&#39;</span><span class="p">:</span>
                <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">UnicornFy</span><span class="o">.</span><span class="n">set_to_false_if_not_exist</span><span class="p">(</span><span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">],</span> <span class="s1">&#39;depth_level&#39;</span><span class="p">)</span>
                <span class="n">unicorn_fied_data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;stream_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;event_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;event_time&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;E&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;transaction_time&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;T&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;symbol&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;s&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;depth_level&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;depth_level&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;first_update_id_in_event&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;U&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;final_update_id_in_event&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;u&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;final_update_id_in_previous_event&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;pu&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;asks&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;a&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;bids&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;b&#39;</span><span class="p">]}</span>
                <span class="k">if</span> <span class="s1">&#39;ps&#39;</span> <span class="ow">in</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]:</span>
                    <span class="n">unicorn_fied_data</span><span class="p">[</span><span class="s1">&#39;pair&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;ps&#39;</span><span class="p">]</span>
            <span class="k">elif</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;ORDER_TRADE_UPDATE&#39;</span><span class="p">:</span>
<span class="w">                </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">                    url: https://binance-docs.github.io/apidocs/futures/en/#event-order-update</span>
<span class="sd">                    ex:</span>
<span class="sd">                    {</span>
<span class="sd">                        &quot;e&quot;:&quot;ORDER_TRADE_UPDATE&quot;,     // Event Type</span>
<span class="sd">                        &quot;E&quot;:1568879465651,            // Event Time</span>
<span class="sd">                        &quot;T&quot;:1568879465650,            // Transaction Time</span>
<span class="sd">                        &quot;o&quot;:{                             </span>
<span class="sd">                                &quot;s&quot;:&quot;BTCUSDT&quot;,              // Symbol</span>
<span class="sd">                                &quot;c&quot;:&quot;TEST&quot;,                 // Client Order Id</span>
<span class="sd">                                // special client order id:</span>
<span class="sd">                                // starts with &quot;autoclose-&quot;: liquidation order</span>
<span class="sd">                                // &quot;adl_autoclose&quot;: ADL auto close order</span>
<span class="sd">                                &quot;S&quot;:&quot;SELL&quot;,                 // Side</span>
<span class="sd">                                &quot;o&quot;:&quot;TRAILING_STOP_MARKET&quot;, // Order Type</span>
<span class="sd">                                &quot;f&quot;:&quot;GTC&quot;,                  // Time in Force</span>
<span class="sd">                                &quot;q&quot;:&quot;0.001&quot;,                // Original Quantity</span>
<span class="sd">                                &quot;p&quot;:&quot;0&quot;,                    // Original Price</span>
<span class="sd">                                &quot;ap&quot;:&quot;0&quot;,                   // Average Price</span>
<span class="sd">                                &quot;sp&quot;:&quot;7103.04&quot;,             // Stop Price. Please ignore with TRAILING_STOP_MARKET order</span>
<span class="sd">                                &quot;x&quot;:&quot;NEW&quot;,                  // Execution Type</span>
<span class="sd">                                &quot;X&quot;:&quot;NEW&quot;,                  // Order Status</span>
<span class="sd">                                &quot;i&quot;:8886774,                // Order Id</span>
<span class="sd">                                &quot;l&quot;:&quot;0&quot;,                    // Order Last Filled Quantity</span>
<span class="sd">                                &quot;z&quot;:&quot;0&quot;,                    // Order Filled Accumulated Quantity</span>
<span class="sd">                                &quot;L&quot;:&quot;0&quot;,                    // Last Filled Price</span>
<span class="sd">                                &quot;N&quot;:&quot;USDT&quot;,             // Commission Asset, will not push if no commission</span>
<span class="sd">                                &quot;n&quot;:&quot;0&quot;,                // Commission, will not push if no commission</span>
<span class="sd">                                &quot;T&quot;:1568879465651,          // Order Trade Time</span>
<span class="sd">                                &quot;t&quot;:0,                      // Trade Id</span>
<span class="sd">                                &quot;b&quot;:&quot;0&quot;,                    // Bids Notional</span>
<span class="sd">                                &quot;a&quot;:&quot;9.91&quot;,                 // Ask Notional</span>
<span class="sd">                                &quot;m&quot;:false,                  // Is this trade the maker side?</span>
<span class="sd">                                &quot;R&quot;:false,                  // Is this reduce only</span>
<span class="sd">                                &quot;wt&quot;:&quot;CONTRACT_PRICE&quot;,      // Stop Price Working Type</span>
<span class="sd">                                &quot;ot&quot;:&quot;TRAILING_STOP_MARKET&quot;,    // Original Order Type</span>
<span class="sd">                                &quot;ps&quot;:&quot;LONG&quot;,                        // Position Side</span>
<span class="sd">                                &quot;cp&quot;:false,                     // If Close-All, pushed with conditional order</span>
<span class="sd">                                &quot;AP&quot;:&quot;7476.89&quot;,             // Activation Price, only puhed with TRAILING_STOP_MARKET order</span>
<span class="sd">                                &quot;cr&quot;:&quot;5.0&quot;,                 // Callback Rate, only puhed with TRAILING_STOP_MARKET order</span>
<span class="sd">                                &quot;rp&quot;:&quot;0&quot;                            // Realized Profit of the trade</span>
<span class="sd">                            }</span>
<span class="sd">                        }</span>
<span class="sd">                &#39;&#39;&#39;</span>
                <span class="n">unicorn_fied_data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;stream_type&#39;</span><span class="p">:</span> <span class="s1">&#39;ORDER_TRADE_UPDATE&#39;</span><span class="p">,</span>
                                     <span class="s1">&#39;event_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;event_time&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;E&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;symbol&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">][</span><span class="s1">&#39;s&#39;</span><span class="p">],</span>  <span class="c1"># Symbol</span>
                                     <span class="s1">&#39;client_order_id&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">][</span><span class="s1">&#39;c&#39;</span><span class="p">],</span>  <span class="c1"># Client Order Id</span>
                                     <span class="s1">&#39;side&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">][</span><span class="s1">&#39;S&#39;</span><span class="p">],</span>  <span class="c1"># Side</span>
                                     <span class="s1">&#39;order_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">],</span>  <span class="c1"># Order Type</span>
                                     <span class="s1">&#39;time_in_force&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">][</span><span class="s1">&#39;f&#39;</span><span class="p">],</span>  <span class="c1"># Time in Force</span>
                                     <span class="s1">&#39;order_quantity&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">][</span><span class="s1">&#39;q&#39;</span><span class="p">],</span>  <span class="c1"># Original Quantity</span>
                                     <span class="s1">&#39;order_price&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">][</span><span class="s1">&#39;p&#39;</span><span class="p">],</span>  <span class="c1"># Original Price</span>
                                     <span class="s1">&#39;order_avg_price&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">][</span><span class="s1">&#39;ap&#39;</span><span class="p">],</span>  <span class="c1"># Average Price</span>
                                     <span class="s1">&#39;order_stop_price&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">][</span><span class="s1">&#39;sp&#39;</span><span class="p">],</span>  <span class="c1"># Stop Price.</span>
                                     <span class="s1">&#39;current_execution_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">][</span><span class="s1">&#39;x&#39;</span><span class="p">],</span>  <span class="c1"># Execution Type</span>
                                     <span class="s1">&#39;current_order_status&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">][</span><span class="s1">&#39;X&#39;</span><span class="p">],</span>  <span class="c1"># Order Status</span>
                                     <span class="s1">&#39;order_id&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">][</span><span class="s1">&#39;i&#39;</span><span class="p">],</span>  <span class="c1"># Order Id</span>
                                     <span class="s1">&#39;last_executed_quantity&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">][</span><span class="s1">&#39;l&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;cumulative_filled_quantity&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">][</span><span class="s1">&#39;z&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;last_executed_price&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">][</span><span class="s1">&#39;L&#39;</span><span class="p">],</span>  <span class="c1"># Last Filled Price</span>
                                     <span class="s1">&#39;transaction_time&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">][</span><span class="s1">&#39;T&#39;</span><span class="p">],</span>  <span class="c1"># Order Trade Time</span>
                                     <span class="s1">&#39;trade_id&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">][</span><span class="s1">&#39;t&#39;</span><span class="p">],</span>  <span class="c1"># Trade Id</span>
                                     <span class="s1">&#39;net_pay&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">][</span><span class="s1">&#39;b&#39;</span><span class="p">],</span>  <span class="c1"># Ask Notional</span>
                                     <span class="s1">&#39;net_selling_order_value&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">][</span><span class="s1">&#39;a&#39;</span><span class="p">],</span>  <span class="c1"># Ask Notional</span>
                                     <span class="s1">&#39;is_trade_maker_side&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">][</span><span class="s1">&#39;m&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;reduce_only&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">][</span><span class="s1">&#39;R&#39;</span><span class="p">],</span>  <span class="c1"># Is this reduce only</span>
                                     <span class="s1">&#39;trigger_price_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">][</span><span class="s1">&#39;wt&#39;</span><span class="p">],</span>  <span class="c1"># Stop Price Working Type</span>
                                     <span class="s1">&#39;order_price_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">][</span><span class="s1">&#39;ot&#39;</span><span class="p">],</span>  <span class="c1"># Original Order Type</span>
                                     <span class="s1">&#39;position_side&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">][</span><span class="s1">&#39;ps&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;order_realized_profit&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">][</span><span class="s1">&#39;rp&#39;</span><span class="p">]}</span>  <span class="c1"># Realized Profit</span>
                <span class="k">if</span> <span class="s1">&#39;i&#39;</span> <span class="ow">in</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]:</span>
                    <span class="n">unicorn_fied_data</span><span class="p">[</span><span class="s1">&#39;account_alias&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;i&#39;</span><span class="p">]</span>
                <span class="k">if</span> <span class="s1">&#39;ma&#39;</span> <span class="ow">in</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">]:</span>
                    <span class="n">unicorn_fied_data</span><span class="p">[</span><span class="s1">&#39;margin_asset&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">][</span><span class="s1">&#39;ma&#39;</span><span class="p">]</span>
                <span class="k">if</span> <span class="s1">&#39;N&#39;</span> <span class="ow">in</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">]:</span>
                    <span class="n">unicorn_fied_data</span><span class="p">[</span><span class="s1">&#39;commission_asset&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">][</span><span class="s1">&#39;N&#39;</span><span class="p">]</span>
                <span class="k">if</span> <span class="s1">&#39;n&#39;</span> <span class="ow">in</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">]:</span>
                    <span class="n">unicorn_fied_data</span><span class="p">[</span><span class="s1">&#39;commission&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">][</span><span class="s1">&#39;n&#39;</span><span class="p">]</span>
                <span class="k">if</span> <span class="s1">&#39;cp&#39;</span> <span class="ow">in</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">]:</span>
                    <span class="n">unicorn_fied_data</span><span class="p">[</span><span class="s1">&#39;close_all&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">][</span><span class="s1">&#39;cp&#39;</span><span class="p">]</span>
                <span class="k">if</span> <span class="s1">&#39;AP&#39;</span> <span class="ow">in</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">]:</span>
                    <span class="n">unicorn_fied_data</span><span class="p">[</span><span class="s1">&#39;activation_price&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">][</span><span class="s1">&#39;AP&#39;</span><span class="p">]</span>
                <span class="k">if</span> <span class="s1">&#39;cr&#39;</span> <span class="ow">in</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">]:</span>
                    <span class="n">unicorn_fied_data</span><span class="p">[</span><span class="s1">&#39;callback_rate&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;o&#39;</span><span class="p">][</span><span class="s1">&#39;cr&#39;</span><span class="p">]</span>
            <span class="k">elif</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;ACCOUNT_UPDATE&#39;</span><span class="p">:</span>
<span class="w">                </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">                    url: https://binance-docs.github.io/apidocs/futures/en/#event-balance-and-position-update</span>
<span class="sd">                    ex:</span>
<span class="sd">                       {</span>
<span class="sd">                        &quot;e&quot;: &quot;ACCOUNT_UPDATE&quot;,                // Event Type</span>
<span class="sd">                        &quot;E&quot;: 1564745798939,                   // Event Time</span>
<span class="sd">                        &quot;T&quot;: 1564745798938 ,                  // Transaction</span>
<span class="sd">                        &quot;a&quot;:                                  // Update Data</span>
<span class="sd">                            {</span>
<span class="sd">                            &quot;m&quot;:&quot;ORDER&quot;,                      // Event reason type</span>
<span class="sd">                            &quot;B&quot;:[                             // Balances</span>
<span class="sd">                                {</span>
<span class="sd">                                &quot;a&quot;:&quot;USDT&quot;,                   // Asset</span>
<span class="sd">                                &quot;wb&quot;:&quot;122624.12345678&quot;,       // Wallet Balance</span>
<span class="sd">                                &quot;cw&quot;:&quot;100.12345678&quot;           // Cross Wallet Balance</span>
<span class="sd">                                },</span>
<span class="sd">                                {</span>
<span class="sd">                                &quot;a&quot;:&quot;BNB&quot;,           </span>
<span class="sd">                                &quot;wb&quot;:&quot;1.00000000&quot;,</span>
<span class="sd">                                &quot;cw&quot;:&quot;0.00000000&quot;         </span>
<span class="sd">                                }</span>
<span class="sd">                            ],</span>
<span class="sd">                            &quot;P&quot;:[</span>
<span class="sd">                                {</span>
<span class="sd">                                &quot;s&quot;:&quot;BTCUSDT&quot;,            // Symbol</span>
<span class="sd">                                &quot;pa&quot;:&quot;0&quot;,                 // Position Amount</span>
<span class="sd">                                &quot;ep&quot;:&quot;0.00000&quot;,            // Entry Price</span>
<span class="sd">                                &quot;cr&quot;:&quot;200&quot;,               // (Pre-fee) Accumulated Realized</span>
<span class="sd">                                &quot;up&quot;:&quot;0&quot;,                     // Unrealized PnL</span>
<span class="sd">                                &quot;mt&quot;:&quot;isolated&quot;,              // Margin Type</span>
<span class="sd">                                &quot;iw&quot;:&quot;0.00000000&quot;,            // Isolated Wallet (if isolated position)</span>
<span class="sd">                                &quot;ps&quot;:&quot;BOTH&quot;                   // Position Side</span>
<span class="sd">                                }，</span>
<span class="sd">                                {</span>
<span class="sd">                                    &quot;s&quot;:&quot;BTCUSDT&quot;,</span>
<span class="sd">                                    &quot;pa&quot;:&quot;20&quot;,</span>
<span class="sd">                                    &quot;ep&quot;:&quot;6563.66500&quot;,</span>
<span class="sd">                                    &quot;cr&quot;:&quot;0&quot;,</span>
<span class="sd">                                    &quot;up&quot;:&quot;2850.21200&quot;,</span>
<span class="sd">                                    &quot;mt&quot;:&quot;isolated&quot;,</span>
<span class="sd">                                    &quot;iw&quot;:&quot;13200.70726908&quot;,</span>
<span class="sd">                                    &quot;ps&quot;:&quot;LONG&quot;</span>
<span class="sd">                                },</span>
<span class="sd">                                {</span>
<span class="sd">                                    &quot;s&quot;:&quot;BTCUSDT&quot;,</span>
<span class="sd">                                    &quot;pa&quot;:&quot;-10&quot;,</span>
<span class="sd">                                    &quot;ep&quot;:&quot;6563.86000&quot;,</span>
<span class="sd">                                    &quot;cr&quot;:&quot;-45.04000000&quot;,</span>
<span class="sd">                                    &quot;up&quot;:&quot;-1423.15600&quot;,</span>
<span class="sd">                                    &quot;mt&quot;:&quot;isolated&quot;,</span>
<span class="sd">                                    &quot;iw&quot;:&quot;6570.42511771&quot;,</span>
<span class="sd">                                    &quot;ps&quot;:&quot;SHORT&quot;</span>
<span class="sd">                                }</span>
<span class="sd">                            ]</span>
<span class="sd">                            }</span>
<span class="sd">                        } </span>
<span class="sd">                &#39;&#39;&#39;</span>
                <span class="n">unicorn_fied_data</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s1">&#39;stream_type&#39;</span><span class="p">:</span> <span class="s1">&#39;ACCOUNT_UPDATE&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;event_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">],</span>
                    <span class="s1">&#39;event_time&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;E&#39;</span><span class="p">],</span>
                    <span class="s1">&#39;transaction&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;T&#39;</span><span class="p">],</span>
                    <span class="s1">&#39;event_reason&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;a&#39;</span><span class="p">][</span><span class="s1">&#39;m&#39;</span><span class="p">],</span>
                    <span class="s1">&#39;balances&#39;</span><span class="p">:</span> <span class="p">[],</span>
                    <span class="s1">&#39;positions&#39;</span><span class="p">:</span> <span class="p">[]</span>
                <span class="p">}</span>
                <span class="k">if</span> <span class="s1">&#39;i&#39;</span> <span class="ow">in</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]:</span>
                    <span class="n">unicorn_fied_data</span><span class="p">[</span><span class="s1">&#39;account_alias&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;i&#39;</span><span class="p">]</span>

                <span class="k">for</span> <span class="n">balance</span> <span class="ow">in</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;a&#39;</span><span class="p">][</span><span class="s1">&#39;B&#39;</span><span class="p">]:</span>
                    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
                        <span class="s1">&#39;asset&#39;</span><span class="p">:</span> <span class="n">balance</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">],</span>
                        <span class="s1">&#39;wallet_balance&#39;</span><span class="p">:</span> <span class="n">balance</span><span class="p">[</span><span class="s1">&#39;wb&#39;</span><span class="p">],</span>
                        <span class="s1">&#39;cross_wallet_balance&#39;</span><span class="p">:</span> <span class="n">balance</span><span class="p">[</span><span class="s1">&#39;cw&#39;</span><span class="p">]</span>
                    <span class="p">}</span>
                    <span class="k">if</span> <span class="s1">&#39;bc&#39;</span> <span class="ow">in</span> <span class="n">balance</span><span class="p">:</span>
                        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;balance_change&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">balance</span><span class="p">[</span><span class="s1">&#39;bc&#39;</span><span class="p">]</span>
                    <span class="n">unicorn_fied_data</span><span class="p">[</span><span class="s1">&#39;balances&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

                <span class="k">for</span> <span class="n">position</span> <span class="ow">in</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;a&#39;</span><span class="p">][</span><span class="s1">&#39;P&#39;</span><span class="p">]:</span>
                    <span class="n">unicorn_fied_data</span><span class="p">[</span><span class="s1">&#39;positions&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
                        <span class="s1">&#39;symbol&#39;</span><span class="p">:</span> <span class="n">position</span><span class="p">[</span><span class="s1">&#39;s&#39;</span><span class="p">],</span>
                        <span class="s1">&#39;position_amount&#39;</span><span class="p">:</span> <span class="n">position</span><span class="p">[</span><span class="s1">&#39;pa&#39;</span><span class="p">],</span>
                        <span class="s1">&#39;entry_price&#39;</span><span class="p">:</span> <span class="n">position</span><span class="p">[</span><span class="s1">&#39;ep&#39;</span><span class="p">],</span>
                        <span class="s1">&#39;accumulated_realized&#39;</span><span class="p">:</span> <span class="n">position</span><span class="p">[</span><span class="s1">&#39;cr&#39;</span><span class="p">],</span>
                        <span class="s1">&#39;upnl&#39;</span><span class="p">:</span> <span class="n">position</span><span class="p">[</span><span class="s1">&#39;up&#39;</span><span class="p">],</span>
                        <span class="s1">&#39;margin_type&#39;</span><span class="p">:</span> <span class="n">position</span><span class="p">[</span><span class="s1">&#39;mt&#39;</span><span class="p">],</span>
                        <span class="s1">&#39;isolated_wallet&#39;</span><span class="p">:</span> <span class="n">position</span><span class="p">[</span><span class="s1">&#39;iw&#39;</span><span class="p">],</span>
                        <span class="s1">&#39;position_side&#39;</span><span class="p">:</span> <span class="n">position</span><span class="p">[</span><span class="s1">&#39;ps&#39;</span><span class="p">]</span>
                    <span class="p">})</span>
            <span class="k">elif</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;MARGIN_CALL&#39;</span><span class="p">:</span>
<span class="w">                </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">                    url: https://binance-docs.github.io/apidocs/futures/en/#event-margin-call</span>
<span class="sd">                    ex: {</span>
<span class="sd">                            &quot;e&quot;:&quot;MARGIN_CALL&quot;,      // Event Type</span>
<span class="sd">                            &quot;E&quot;:1587727187525,      // Event Time</span>
<span class="sd">                            &quot;cw&quot;:&quot;3.16812045&quot;,      // Cross Wallet Balance. Only pushed with crossed position margin call</span>
<span class="sd">                            &quot;p&quot;:[                   // Position(s) of Margin Call</span>
<span class="sd">                            {</span>
<span class="sd">                                &quot;s&quot;:&quot;ETHUSDT&quot;,      // Symbol</span>
<span class="sd">                                &quot;ps&quot;:&quot;LONG&quot;,        // Position Side</span>
<span class="sd">                                &quot;pa&quot;:&quot;1.327&quot;,       // Position Amount</span>
<span class="sd">                                &quot;mt&quot;:&quot;CROSSED&quot;,     // Margin Type</span>
<span class="sd">                                &quot;iw&quot;:&quot;0&quot;,           // Isolated Wallet (if isolated position)</span>
<span class="sd">                                &quot;mp&quot;:&quot;187.17127&quot;,   // Mark Price</span>
<span class="sd">                                &quot;up&quot;:&quot;-1.166074&quot;,   // Unrealized PnL</span>
<span class="sd">                                &quot;mm&quot;:&quot;1m,n.614445&quot;     // Maintenance Margin Required</span>
<span class="sd">                            }</span>
<span class="sd">                            ]</span>
<span class="sd">                        }  </span>
<span class="sd">                &#39;&#39;&#39;</span>
                <span class="n">unicorn_fied_data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;stream_type&#39;</span><span class="p">:</span> <span class="s1">&#39;MARGIN_CALL&#39;</span><span class="p">,</span>
                                     <span class="s1">&#39;event_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;event_time&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;E&#39;</span><span class="p">],</span>
                                     <span class="s1">&#39;positions&#39;</span><span class="p">:</span> <span class="p">[]}</span>

                <span class="k">if</span> <span class="s1">&#39;i&#39;</span> <span class="ow">in</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]:</span>
                    <span class="n">unicorn_fied_data</span><span class="p">[</span><span class="s1">&#39;account_alias&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;i&#39;</span><span class="p">]</span>
                <span class="k">if</span> <span class="s1">&#39;cw&#39;</span> <span class="ow">in</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]:</span>
                    <span class="n">unicorn_fied_data</span><span class="p">[</span><span class="s1">&#39;cross_wallet&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;cw&#39;</span><span class="p">]</span>

                <span class="k">for</span> <span class="n">position</span> <span class="ow">in</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;p&#39;</span><span class="p">]:</span>
                    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;symbol&#39;</span><span class="p">:</span> <span class="n">position</span><span class="p">[</span><span class="s1">&#39;s&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;side&#39;</span><span class="p">:</span> <span class="n">position</span><span class="p">[</span><span class="s1">&#39;ps&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;amount&#39;</span><span class="p">:</span> <span class="n">position</span><span class="p">[</span><span class="s1">&#39;pa&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="n">position</span><span class="p">[</span><span class="s1">&#39;mt&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;price&#39;</span><span class="p">:</span> <span class="n">position</span><span class="p">[</span><span class="s1">&#39;mp&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;pnl&#39;</span><span class="p">:</span> <span class="n">position</span><span class="p">[</span><span class="s1">&#39;up&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;margin&#39;</span><span class="p">:</span> <span class="n">position</span><span class="p">[</span><span class="s1">&#39;mm&#39;</span><span class="p">]}</span>
                    <span class="k">if</span> <span class="s1">&#39;iw&#39;</span> <span class="ow">in</span> <span class="n">position</span><span class="p">:</span>
                        <span class="n">unicorn_fied_data</span><span class="p">[</span><span class="s1">&#39;isolated_wallet&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">position</span><span class="p">[</span><span class="s1">&#39;iw&#39;</span><span class="p">]</span>
                    <span class="n">unicorn_fied_data</span><span class="p">[</span><span class="s1">&#39;positions&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;ACCOUNT_CONFIG_UPDATE&#39;</span><span class="p">:</span>
<span class="w">                </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">                url: https://binance-docs.github.io/apidocs/futures/en/#event-order-update</span>
<span class="sd">                ex:</span>
<span class="sd">                {</span>
<span class="sd">                    &quot;e&quot;:&quot;ACCOUNT_CONFIG_UPDATE&quot;,       // Event Type</span>
<span class="sd">                    &quot;E&quot;:1611646737479,                 // Event Time</span>
<span class="sd">                    &quot;T&quot;:1611646737476,                 // Transaction Time</span>
<span class="sd">                    &quot;ac&quot;:{                              </span>
<span class="sd">                    &quot;s&quot;:&quot;BTCUSDT&quot;,                     // symbol</span>
<span class="sd">                    &quot;l&quot;:25                             // leverage</span>
<span class="sd">                    }</span>
<span class="sd">                }</span>
<span class="sd">                or:</span>
<span class="sd">                {</span>
<span class="sd">                    &quot;e&quot;:&quot;ACCOUNT_CONFIG_UPDATE&quot;,       // Event Type</span>
<span class="sd">                    &quot;E&quot;:1611646737479,                 // Event Time</span>
<span class="sd">                    &quot;T&quot;:1611646737476,                 // Transaction Time</span>
<span class="sd">                    &quot;ai&quot;:{                             // User&#39;s Account Configuration</span>
<span class="sd">                    &quot;j&quot;:true                           // Multi-Assets Mode</span>
<span class="sd">                    }</span>
<span class="sd">                }</span>
<span class="sd">                &#39;&#39;&#39;</span>
                <span class="k">if</span> <span class="s2">&quot;ac&quot;</span> <span class="ow">in</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]:</span>
                    <span class="n">unicorn_fied_data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;stream_type&#39;</span><span class="p">:</span> <span class="s1">&#39;ACCOUNT_CONFIG_UPDATE&#39;</span><span class="p">,</span>
                                         <span class="s1">&#39;event_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">],</span>
                                         <span class="s1">&#39;event_time&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;E&#39;</span><span class="p">],</span>
                                         <span class="s1">&#39;symbol&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;ac&#39;</span><span class="p">][</span><span class="s1">&#39;s&#39;</span><span class="p">],</span>
                                         <span class="s1">&#39;leverage&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;ac&#39;</span><span class="p">][</span><span class="s1">&#39;l&#39;</span><span class="p">]</span>
                                         <span class="p">}</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">unicorn_fied_data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;stream_type&#39;</span><span class="p">:</span> <span class="s1">&#39;ACCOUNT_CONFIG_UPDATE&#39;</span><span class="p">,</span>
                                         <span class="s1">&#39;event_type&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;e&#39;</span><span class="p">],</span>
                                         <span class="s1">&#39;event_time&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;E&#39;</span><span class="p">],</span>
                                         <span class="s1">&#39;multi_assets_mode&#39;</span><span class="p">:</span> <span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;ai&#39;</span><span class="p">][</span><span class="s1">&#39;j&#39;</span><span class="p">],</span>
                                         <span class="p">}</span>
        <span class="k">except</span> <span class="ne">TypeError</span> <span class="k">as</span> <span class="n">error_msg</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;UnicornFy-&gt;binance_futures_websocket(</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">unicorn_fied_data</span><span class="p">)</span><span class="si">}</span><span class="s2">) - &quot;</span>
                            <span class="sa">f</span><span class="s2">&quot;error: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span><span class="si">}</span><span class="s2"> - Variable: </span><span class="si">{</span><span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">error_msg</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;UnicornFy-&gt;binance_futures_websocket(</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">unicorn_fied_data</span><span class="p">)</span><span class="si">}</span><span class="s2">) - &quot;</span>
                            <span class="sa">f</span><span class="s2">&quot;error: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span><span class="si">}</span><span class="s2"> - Variable: </span><span class="si">{</span><span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">unicorn_fied_version</span> <span class="o">=</span> <span class="p">[</span><span class="n">exchange</span><span class="p">,</span> <span class="n">UnicornFy</span><span class="o">.</span><span class="n">VERSION</span><span class="p">]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">unicorn_fied_data</span><span class="p">[</span><span class="s1">&#39;unicorn_fied&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">unicorn_fied_version</span>
        <span class="k">except</span> <span class="ne">TypeError</span> <span class="k">as</span> <span class="n">error_msg</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;UnicornFy-&gt;binance_futures_websocket(</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">unicorn_fied_data</span><span class="p">)</span><span class="si">}</span><span class="s2">) - &quot;</span>
                            <span class="sa">f</span><span class="s2">&quot;error: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">error_msg</span><span class="p">)</span><span class="si">}</span><span class="s2"> - Variable: </span><span class="si">{</span><span class="n">stream_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;UnicornFy-&gt;binance_futures_websocket(&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">unicorn_fied_data</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">unicorn_fied_data</span></div>


<div class="viewcode-block" id="UnicornFy.jex_com_websocket">
<a class="viewcode-back" href="../../unicorn_fy.html#unicorn_fy.unicorn_fy.UnicornFy.jex_com_websocket">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">jex_com_websocket</span><span class="p">(</span><span class="n">stream_data_json</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        unicorn_fy jex.com raw_stream_data</span>

<span class="sd">        :param stream_data_json: The received raw stream data from the Binance websocket</span>
<span class="sd">        :type stream_data_json: json</span>

<span class="sd">        :return: dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">UnicornFy</span><span class="o">.</span><span class="n">binance_websocket</span><span class="p">(</span><span class="n">stream_data_json</span><span class="p">,</span> <span class="n">exchange</span><span class="o">=</span><span class="s2">&quot;jex.com&quot;</span><span class="p">,</span> <span class="n">show_deprecated_warning</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>


<div class="viewcode-block" id="UnicornFy.get_latest_release_info">
<a class="viewcode-back" href="../../unicorn_fy.html#unicorn_fy.unicorn_fy.UnicornFy.get_latest_release_info">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">get_latest_release_info</span><span class="p">():</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get infos about the latest available release</span>

<span class="sd">        :return: dict or False</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">respond</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;https://api.github.com/repos/oliver-zehentleitner/unicorn-fy/releases/latest&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">respond</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span></div>


<div class="viewcode-block" id="UnicornFy.get_latest_version">
<a class="viewcode-back" href="../../unicorn_fy.html#unicorn_fy.unicorn_fy.UnicornFy.get_latest_version">[docs]</a>
    <span class="k">def</span> <span class="nf">get_latest_version</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the version of the latest available release (cache time 1 hour)</span>

<span class="sd">        :return: str or False</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Do a fresh request if status is None or last timestamp is older 1 hour</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_update_check_github</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> \
                <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">last_update_check_github</span><span class="p">[</span><span class="s1">&#39;timestamp&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">last_update_check_github</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_latest_release_info</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_update_check_github</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">]:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_update_check_github</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">][</span><span class="s2">&quot;tag_name&quot;</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="k">return</span> <span class="s2">&quot;unknown&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;unknown&quot;</span></div>


<div class="viewcode-block" id="UnicornFy.get_version">
<a class="viewcode-back" href="../../unicorn_fy.html#unicorn_fy.unicorn_fy.UnicornFy.get_version">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">get_version</span><span class="p">():</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the package/module version</span>

<span class="sd">        :return: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">UnicornFy</span><span class="o">.</span><span class="n">VERSION</span></div>


<div class="viewcode-block" id="UnicornFy.is_json">
<a class="viewcode-back" href="../../unicorn_fy.html#unicorn_fy.unicorn_fy.UnicornFy.is_json">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">is_json</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Is the string in json format?</span>

<span class="sd">        :param data: the data to verify</span>
<span class="sd">        :type data: str</span>

<span class="sd">        :return: True or False</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="kc">True</span></div>


<div class="viewcode-block" id="UnicornFy.is_update_available">
<a class="viewcode-back" href="../../unicorn_fy.html#unicorn_fy.unicorn_fy.UnicornFy.is_update_available">[docs]</a>
    <span class="k">def</span> <span class="nf">is_update_available</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Is a new release of this package available?</span>

<span class="sd">        :return: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">installed_version</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_version</span><span class="p">()</span>
        <span class="n">latest_version</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_latest_version</span><span class="p">()</span>
        <span class="k">if</span> <span class="s2">&quot;.dev&quot;</span> <span class="ow">in</span> <span class="n">installed_version</span><span class="p">:</span>
            <span class="n">installed_version</span> <span class="o">=</span> <span class="n">installed_version</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">latest_version</span> <span class="o">==</span> <span class="n">installed_version</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">elif</span> <span class="n">latest_version</span> <span class="o">==</span> <span class="s2">&quot;unknown&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span></div>


<div class="viewcode-block" id="UnicornFy.set_to_false_if_not_exist">
<a class="viewcode-back" href="../../unicorn_fy.html#unicorn_fy.unicorn_fy.UnicornFy.set_to_false_if_not_exist">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">set_to_false_if_not_exist</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        some vars are non existent if they would be empty, so we create the missing vars with default values</span>

<span class="sd">        :param value: default value</span>
<span class="sd">        :type value: str</span>

<span class="sd">        :param key: the key name</span>
<span class="sd">        :type key: str</span>

<span class="sd">        :return: final value</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">value</span><span class="p">[</span><span class="n">key</span><span class="p">]:</span>
                <span class="k">return</span> <span class="n">value</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="n">value</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">return</span> <span class="n">value</span>
        <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
            <span class="n">value</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">return</span> <span class="n">value</span></div>
</div>

</pre></div>

            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo">
                <div style="text-align: center;">
                    <a href="https://www.lucit.tech"><img src="https://www.lucit.tech/files/images/logos/LUCIT-LOGO.png"></a><br>
                    <a href="https://shop.lucit.services/software/unicorn-binance-suite" style="font-size: 0.85em;font-weight: 900">Get a UNICORN Binance Suite License!</a><br>
                    <br>
                    <a href="https://github.com/LUCIT-Systems-and-Development" target="_blank" style="text-decoration:none;"><img src="../../_static/icons8-github-20.png"></a>
                    <a href="https://fb.me/lucit.systems.and.development" target="_blank" style="text-decoration:none;"><img src="../../_static/icons8-facebook-20.png"></a>
                    <a href="https://twitter.com/LUCIT_SysDev" target="_blank" style="text-decoration:none;"><img src="../../_static/icons8-twitter-20.png"></a>
                    <a href="https://www.linkedin.com/company/lucit-systems-and-development" target="_blank" style="text-decoration:none;"><img src="../../_static/icons8-linkedin-20.png"></a>
                    <a href="https://www.xing.com/pages/lucit-systems-and-development" target="_blank" style="text-decoration:none;"><img src="../../_static/icons8-xing-20.png"></a>
                    <a href="https://medium.lucit.tech" target="_blank" style="text-decoration:none;"><img src="../../_static/icons8-medium-monogram-20.png"></a>
                    <a href="https://www.youtube.com/channel/UCp57u8vaPqEWQTlfpYn-KnQ" target="_blank" style="text-decoration:none;"><img src="../../_static/icons8-youtube-20.png"></a>
                </div>
            </p>
<div id="searchbox" style="display: block" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
<div role="note" aria-label="source code">
    <h3>GitHub</h3>
    <ul class="this-page-menu">
      <li><a href="https://github.com/LUCIT-Systems-and-Development/unicorn-fy">Show Source</a></li>
      
<li>
<a class="github-button" href="https://github.com/LUCIT-Systems-and-Development/unicorn-fy"
   data-icon="octicon-star" data-show-count="true"
   aria-label="Star LUCIT-Systems-and-Development/unicorn-fy on GitHub">Star</a>
<br />
<a class="github-button" href="https://github.com/LUCIT-Systems-and-Development/unicorn-fy/subscription"
   data-icon="octicon-eye" data-show-count="true"
   aria-label="Watch LUCIT-Systems-and-Development/unicorn-fy on GitHub">Watch</a>
<br />
<a class="github-button" href="https://github.com/LUCIT-Systems-and-Development/unicorn-fy/fork"
   data-icon="octicon-repo-forked" data-show-count="true"
   aria-label="Fork LUCIT-Systems-and-Development/unicorn-fy on GitHub">Fork</a>
<br />
<a class="github-button" href="https://github.com/LUCIT-Systems-and-Development/unicorn-fy/issues"
   data-icon="octicon-issue-opened"
   data-show-count="true" aria-label="Issue LUCIT-Systems-and-Development/unicorn-fy on GitHub">Issue</a>
    
</li>

    </ul>
</div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
              
                  
                  
              <li><img src="../../_static/lucit.png" alt="LUCIT Logo"
                       style="vertical-align: middle; margin-top: -1px"/></li>
              <li><a href="https://www.lucit.tech/unicorn-fy.html">unicorn-fy</a> &#187;</li>
                  
              
              
              <a href="../../index.html">Docs</a> &#187;
              
          <li class="nav-item nav-item-1"><a href="../index.html" >Module code</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">unicorn_fy.unicorn_fy</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../../search.html" method="get">
          <input placeholder="Quick search" aria-label="Quick search" type="text" name="q" />
          <input type="submit" value="Go" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
                     |
                </li>
            
      </ul>
    </div>  
    <div class="footer">
    &copy; <a href="/license.html">Copyright</a> 2023-2023, LUCIT Systems and Development. All Rights Reserved..
    See <a href="/license.html">License</a> for more information.<br />
    Last updated on Nov 27 2023 at 15:55 (CET).
    <a href="https://github.com/LUCIT-Systems-and-Development/unicorn-fy/issues/new/choose">Found a bug</a>?
    <br />
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.6.
        with <a href="https://github.com/LUCIT-Systems-and-Development/python-docs-theme-lucit">python-docs-theme-lucit</a>
        by <a href="https://www.lucit.tech">LUCIT Systems and Development</a>.
    </div>
    
    <img referrerpolicy="no-referrer-when-downgrade" src="https://webmon.lucit.services/matomo.php?idsite=7&amp;rec=1" style="border:0" alt="" />
    

  </body>
</html>